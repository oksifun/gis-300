from uuid import UUID

d = [{'AdditionalService': None,
    'GroupMunicipalService': None,
    'HousingService': {'AccountingPeriodTotal': 1838.19,
        'MunicipalResource': [{'AccountingPeriodTotal': 51.45,
            'AmountOfPaymentMunicipalServiceCommunalConsumption': 51.45,
            'Consumption': {'Volume': {'_value_1': 10,
                'determiningMethod': 'M',
                'type': 'O'}},
            'GeneralMunicipalResource': None,
            'MunicipalServiceCommunalConsumptionPayable': 51.45,
            'PaymentRecalculation': None,
            'Rate': 5.13,
            'ServiceCharge': {'MoneyDiscount': 0.0,
                'MoneyRecalculation': 0.0},
            'ServiceType': {'Code': '1',
                'GUID': UUID('3e8f1b43-a97c-4702-b44f-1840aef9f8fb'),
                'Name': 'Плата '
                        'за '
                        'содержание '
                        'жилого '
                        'помещения'},
            'TotalPayable': 51.45,
            'Unit': 'D'},
            {'AccountingPeriodTotal': 12.91,
                'AmountOfPaymentMunicipalServiceCommunalConsumption': 12.91,
                'Consumption': {'Volume': {'_value_1': 4,
                    'determiningMethod': 'M',
                    'type': 'O'}},
                'GeneralMunicipalResource': None,
                'MunicipalServiceCommunalConsumptionPayable': 12.91,
                'PaymentRecalculation': None,
                'Rate': 2.96,
                'ServiceCharge': {'MoneyDiscount': 0.0,
                    'MoneyRecalculation': 0.0},
                'ServiceType': {'Code': '1',
                    'GUID': UUID('3e8f1b43-a97c-4702-b44f-1840aef9f8fb'),
                    'Name': 'Плата '
                            'за '
                            'содержание '
                            'жилого '
                            'помещения'},
                'TotalPayable': 12.91,
                'Unit': 'D'},
            {'AccountingPeriodTotal': 12.99,
                'AmountOfPaymentMunicipalServiceCommunalConsumption': 12.99,
                'Consumption': {'Volume': {'_value_1': 0,
                    'determiningMethod': 'N',
                    'type': 'O'}},
                'GeneralMunicipalResource': None,
                'MunicipalServiceCommunalConsumptionPayable': 12.99,
                'PaymentRecalculation': None,
                'Rate': 31.58,
                'ServiceCharge': {'MoneyDiscount': 0.0,
                    'MoneyRecalculation': 0.0},
                'ServiceType': {'Code': '1',
                    'GUID': UUID('3e8f1b43-a97c-4702-b44f-1840aef9f8fb'),
                    'Name': 'Плата '
                            'за '
                            'содержание '
                            'жилого '
                            'помещения'},
                'TotalPayable': 12.99,
                'Unit': 'D'}],
        'PaymentInformationKey': UUID('4f3443b8-63ae-11ea-a09e-7085c2b95959'),
        'PaymentRecalculation': None,
        'Rate': 129.84,
        'ServiceCharge': None,
        'ServiceType': {'Code': '1',
            'GUID': UUID('510ed4d6-cf55-4fc1-939a-1c642afe982c'),
            'Name': 'Плата '
                    'за '
                    'содержание '
                    'жилого '
                    'помещения'},
        'TotalPayable': 1838.19},
    'MunicipalService': None},
    {'AdditionalService': None,
        'GroupMunicipalService': None,
        'HousingService': None,
        'MunicipalService': {'AccountingPeriodTotal': 1467.51,
            'AmountOfPaymentMunicipalServiceCommunalConsumption': 1467.51,
            'AmountOfPaymentMunicipalServiceIndividualConsumption': None,
            'Consumption': [{'Volume': {'_value_1': 0.8312932,
                'determiningMethod': 'M',
                'type': 'O'}}],
            'MultiplyingFactor': None,
            'MunicipalServiceCommunalConsumptionPayable': 1467.51,
            'MunicipalServiceIndividualConsumptionPayable': None,
            'PaymentInformationKey': UUID('4f3443b8-63ae-11ea-a09e-7085c2b95959'),
            'PaymentRecalculation': None,
            'Rate': 1765.33,
            'ServiceCharge': None,
            'ServiceType': {'Code': '6.1',
                'GUID': UUID('5f4aca23-8e3b-4750-be39-c2f0f0a16771'),
                'Name': 'Отопление'},
            'TotalPayable': 1467.51}},
    {'AdditionalService': None,
        'GroupMunicipalService': None,
        'HousingService': None,
        'MunicipalService': {'AccountingPeriodTotal': 0.0,
            'AmountOfPaymentMunicipalServiceCommunalConsumption': None,
            'AmountOfPaymentMunicipalServiceIndividualConsumption': None,
            'Consumption': None,
            'MultiplyingFactor': None,
            'MunicipalServiceCommunalConsumptionPayable': None,
            'MunicipalServiceIndividualConsumptionPayable': None,
            'PaymentInformationKey': UUID('4f3443b8-63ae-11ea-a09e-7085c2b95959'),
            'PaymentRecalculation': None,
            'Rate': 31.58,
            'ServiceCharge': None,
            'ServiceType': {'Code': '1.1',
                'GUID': UUID('e40793ce-f16b-4bd1-959f-0ece57eaebc9'),
                'Name': 'Холодное '
                        'водоснабжение'},
            'TotalPayable': 0.0}},
    {'AdditionalService': None,
        'GroupMunicipalService': None,
        'HousingService': None,
        'MunicipalService': {'AccountingPeriodTotal': 0.0,
            'AmountOfPaymentMunicipalServiceCommunalConsumption': None,
            'AmountOfPaymentMunicipalServiceIndividualConsumption': None,
            'Consumption': None,
            'MultiplyingFactor': None,
            'MunicipalServiceCommunalConsumptionPayable': None,
            'MunicipalServiceIndividualConsumptionPayable': None,
            'PaymentInformationKey': UUID('4f3443b8-63ae-11ea-a09e-7085c2b95959'),
            'PaymentRecalculation': None,
            'Rate': 31.58,
            'ServiceCharge': None,
            'ServiceType': {'Code': '3.1',
                'GUID': UUID('9993f757-81ff-4a13-ba9f-bf490751fde2'),
                'Name': 'Водоотведение'},
            'TotalPayable': 0.0}},
    {'AdditionalService': {'AccountingPeriodTotal': 97.5,
        'Consumption': None,
        'PaymentInformationKey': UUID('4f3443b8-63ae-11ea-a09e-7085c2b95959'),
        'PaymentRecalculation': None,
        'Rate': 97.5,
        'ServiceCharge': None,
        'ServiceType': {'Code': '1',
            'GUID': UUID('42fee1cd-2044-45b4-b5c7-91fd0f11a8b5'),
            'Name': 'Радио'},
        'TotalPayable': 97.5},
        'GroupMunicipalService': None,
        'HousingService': None,
        'MunicipalService': None},
    {'AdditionalService': {'AccountingPeriodTotal': 90.0,
        'Consumption': None,
        'PaymentInformationKey': UUID('4f3443b8-63ae-11ea-a09e-7085c2b95959'),
        'PaymentRecalculation': None,
        'Rate': 90.0,
        'ServiceCharge': None,
        'ServiceType': {'Code': '2',
            'GUID': UUID('6ecd7493-23aa-4b22-9065-0da92e612ec9'),
            'Name': 'Антенна'},
        'TotalPayable': 90.0},
        'GroupMunicipalService': None,
        'HousingService': None,
        'MunicipalService': None},
    {'AdditionalService': {'AccountingPeriodTotal': 15.0,
        'Consumption': None,
        'PaymentInformationKey': UUID('4f3443b8-63ae-11ea-a09e-7085c2b95959'),
        'PaymentRecalculation': None,
        'Rate': 15.0,
        'ServiceCharge': None,
        'ServiceType': {'Code': '9',
            'GUID': UUID('d76740da-d9a4-4583-8010-37d453b816ae'),
            'Name': 'Услуги '
                    'ВЦ'},
        'TotalPayable': 15.0},
        'GroupMunicipalService': None,
        'HousingService': None,
        'MunicipalService': None},
    {'AdditionalService': {'AccountingPeriodTotal': 53.51,
        'Consumption': None,
        'PaymentInformationKey': UUID('4f3443b8-63ae-11ea-a09e-7085c2b95959'),
        'PaymentRecalculation': None,
        'Rate': 1.56,
        'ServiceCharge': None,
        'ServiceType': {'Code': '10',
            'GUID': UUID('824b3fcf-3908-4e97-a747-d66630420158'),
            'Name': 'Услуги '
                    'банка '
                    'ВТБ'},
        'TotalPayable': 53.51},
        'GroupMunicipalService': None,
        'HousingService': None,
        'MunicipalService': None}]

if __name__ == '__main__':

    from processing.models.billing.service_type import ServiceTypeGisBind
    print(ServiceTypeGisBind.by_type("526234c0e0e34c4743822330", '59269b0283788b0029c8b975')); exit()
    print(ServiceTypeGisBind.get_binds('59269b0283788b0029c8b975', 'Плата за содержание жилого помещения')); exit()

    print('\n'.join('ADDITIONAL:' + i['AdditionalService']['ServiceType']['Name'] if i['AdditionalService']
        else 'MUNICIPAL:' + i['MunicipalService']['ServiceType']['Name'] if i['MunicipalService']
        else 'HOUSING:' + '; '.join(j['ServiceType']['Name'] for j in i['HousingService']['MunicipalResource'])
        for i in d))
