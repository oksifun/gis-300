# Управление конфигурациями

* Запуск нужного проекта осуществляется в jenkins: jenkins.eis24.me
* В настройках каждого проекта прописан bash-скрипт, какую пару `*.yml` `*.ini` файлов запускает ansible(см. след. пункт)
* Ветка из гита подтягивается всегда перед запуском.

### yml файлы с различными ролями:
    prod_all.yml - деплой всех ролей backend, frontend, приложения сайта в продакшн
    prod_backend.yml - основные приложения Backend'a, должен использоваться наиболее часто
    prod_backend_daemons.yml - тоже что и prod_backend, + старые демоны, которые скоро войдут в prod_backend.
    prod_nginx.yml - Для обновления SSL-сертификатов и пуш статики FE
    test_stage.yml - деплой всех ролей backend, frontend на тестовые сервера + нетокоторые специфические роли

### ini файлы:
    nodes_production.ini - все производственные узлы
    nodes_hotfix.ini - тесторый сервер, расположен в офисе
    nodes_stage.ini - тесторый сервер, расположен в офисе
    nodes_showroom.ini - тесторый сервер, расположен в офисе

### прочие файлы:
    ansible.cfg - конфигурация ansible, пути к ролям и файлу шифрования
    requirements.txt - ПО ansible и его зависимостей
    requirements.yml - зависимости для ролей geerlingguy(.roles)
    redis.conf - для локальной сборки
    nginx.conf - для локальной сборки

### ssh ключи:
расположены на ci-сервере, jenkins /root/.ssh

#### TODO ####
    * Запуск по тегам пока не обеспечен, разбираюсь!
    * работаю с переходом на pipeline, есть тестовый pipe на hotfix
